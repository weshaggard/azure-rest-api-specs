{
  "parameters": {
    "subscriptionId": "8e17e36c-42e9-4cd5-a078-7b44883414e0",
    "resourceGroupName": "test-rg",
    "phpWorkloadName": "moodle39",
    "api-version": "2021-12-01-preview",
    "phpWorkloadResource": {
      "tags": {},
      "location": "westcentalus",
      "kind": "Moodle",
      "sku": {
        "name": "Large"
      },
      "properties": {
        "infraResourceGroup": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39",
        "adminUserProfile": {
          "userName": "moodleadmin",
          "sshPublicKey": "===SSH=PUBLIC=KEY==="
        },
        "webNodesProfile": {
          "name": "web-server",
          "nodeSku": "Standard_DS2_v2",
          "osImage": {
            "publisher": "UbuntuServer",
            "offer": "Canonical",
            "sku": "18.0-LTS",
            "version": "latest"
          },
          "osDisk": {
            "storageType": "Premium_LRS"
          },
          "autoScaleMinCount": 1,
          "autoScaleMaxCount": 1
        },
        "controllerProfile": {
          "name": "contoller-vm",
          "nodeSku": "Standard_DS2_v2",
          "osImage": {
            "publisher": "UbuntuServer",
            "offer": "Canonical",
            "sku": "18.0-LTS",
            "version": "latest"
          },
          "osDisk": {
            "storageType": "Premium_LRS"
          },
          "dataDisks": [
            {
              "storageType": "Premium_LRS",
              "sizeInGB": 100
            }
          ]
        },
        "networkProfile": {
          "loadBalancerType": "ApplicationGateway",
          "loadBalancerSku": "Standard_v2",
          "loadBalancerTier": "Standard_v2",
          "capacity": 3,
          "azureFrontDoorEnabled": "Enabled"
        },
        "databaseProfile": {
          "type": "MySql",
          "serverName": "moodle-db-server",
          "version": "5.7",
          "adminUser": "dbadmin",
          "adminUserPassword": "xxxxxxxxxxx",
          "sku": "Standard_D32s_v4",
          "tier": "GeneralPurpose",
          "haEnabled": "Disabled",
          "storageSku": "Premium_LRS",
          "storageInGB": 128,
          "storageIops": 200,
          "backupRetentionDays": 7,
          "sslEnforcementEnabled": "Enabled"
        },
        "siteProfile": {
          "webServerType": "nginx",
          "domainName": "www.example.com"
        },
        "fileshareProfile": {
          "shareType": "AzureFiles",
          "storageType": "Premium_LRS",
          "shareSizeInGB": 100
        },
        "applicationProfile": {
          "version": "Moodle_39",
          "databaseName": "moodledb",
          "databaseUser": "moodleuser"
        },
        "phpProfile": {
          "version": "7.3"
        },
        "searchProfile": {
          "nodeSku": "Standard_DS2_v2",
          "osImage": {
            "publisher": "UbuntuServer",
            "offer": "Canonical",
            "sku": "18.0-LTS",
            "version": "latest"
          },
          "osDisk": {
            "storageType": "Premium_LRS"
          },
          "searchType": "Elastic"
        },
        "cacheProfile": {
          "name": "moodle-cache",
          "skuName": "Basic",
          "family": "C",
          "capacity": 0
        },
        "backupProfile": {
          "backupEnabled": "Disabled"
        }
      }
    }
  },
  "responses": {
    "200": {
      "body": {
        "id": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/test-rg/providers/Microsot.Workloads/phpWorkloads/moodle39",
        "name": "moodle39",
        "type": "Microsot.Workloads/phpWorkloads",
        "tags": {},
        "location": "westcentalus",
        "kind": "Moodle",
        "sku": {
          "name": "Large"
        },
        "systemData": {
          "createdBy": "php_user@xyz.com",
          "createdByType": "User",
          "createdAt": "2021-08-19T15:10:46.196Z",
          "lastModifiedBy": "php_user@xyz.com",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2021-08-19T15:10:46.196Z"
        },
        "properties": {
          "infraResourceGroup": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39",
          "provisioningState": "Succeeded",
          "adminUserProfile": {
            "userName": "moodleadmin",
            "sshPublicKey": "===SSH=PUBLIC=KEY==="
          },
          "webNodesProfile": {
            "name": "web-server",
            "nodeSku": "Standard_DS2_v2",
            "osImage": {
              "publisher": "UbuntuServer",
              "offer": "Canonical",
              "sku": "18.0-LTS",
              "version": "latest"
            },
            "osDisk": {
              "storageType": "Premium_LRS",
              "sizeInGB": 30
            },
            "autoScaleMinCount": 1,
            "autoScaleMaxCount": 1,
            "nodeResourceIds": [
              "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Compute/virtualMachineScaleSets/vmss-fymfur"
            ]
          },
          "controllerProfile": {
            "name": "contoller-vm",
            "nodeSku": "Standard_DS2_v2",
            "osImage": {
              "publisher": "UbuntuServer",
              "offer": "Canonical",
              "sku": "18.0-LTS",
              "version": "latest"
            },
            "osDisk": {
              "storageType": "Premium_LRS",
              "sizeInGB": 30
            },
            "dataDisks": [
              {
                "storageType": "Premium_LRS",
                "sizeInGB": 100
              }
            ],
            "nodeResourceIds": [
              "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Compute/virtualMachines/controller-fymfur"
            ]
          },
          "networkProfile": {
            "loadBalancerType": "ApplicationGateway",
            "loadBalancerSku": "Standard_v2",
            "loadBalancerTier": "Standard_v2",
            "capacity": 3,
            "azureFrontDoorEnabled": "Enabled",
            "vNetResourceId": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Network/virtualNetworks/vnet-fymfur",
            "loadBalancerResourceId": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Network/loadBalancers/lb-fymfur",
            "frontEndPublicIpResourceId": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Network/publicIPAddresses/lb-pubip-fymfur",
            "azureFrontDoorResourceId": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Network/frontdoors/afd-fymfur",
            "outboundPublicIpResourceIds": [
              "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Network/publicIPAddresses/lb-outpubip001-fymfur",
              "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Network/publicIPAddresses/lb-outpubip002-fymfur"
            ]
          },
          "databaseProfile": {
            "type": "MySql",
            "serverName": "moodle-db-server",
            "version": "5.7",
            "adminUser": "dbadmin",
            "sku": "Standard_D32s_v4",
            "tier": "GeneralPurpose",
            "haEnabled": "Disabled",
            "storageSku": "Premium_LRS",
            "storageInGB": 128,
            "storageIops": 200,
            "backupRetentionDays": 7,
            "sslEnforcementEnabled": "Enabled",
            "serverResourceId": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.DBforMySQL/servers/mysql-fymfur"
          },
          "siteProfile": {
            "webServerType": "nginx",
            "domainName": "www.example.com",
            "siteUrl": "https://www.example.com"
          },
          "fileshareProfile": {
            "shareType": "AzureFiles",
            "storageType": "Premium_LRS",
            "shareSizeInGB": 100,
            "storageResourceId": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Storage/storageAccounts/absfymfuraf",
            "shareName": "moodle"
          },
          "applicationProfile": {
            "version": "Moodle_3.8.3",
            "plugins": [],
            "databaseName": "moodledb",
            "databaseUser": "moodleuser"
          },
          "phpProfile": {
            "version": "7.3"
          },
          "searchProfile": {
            "nodeSku": "Standard_DS2_v2",
            "osImage": {
              "publisher": "UbuntuServer",
              "offer": "Canonical",
              "sku": "18.0-LTS",
              "version": "latest"
            },
            "osDisk": {
              "storageType": "Premium_LRS",
              "sizeInGB": 0
            },
            "dataDisks": [],
            "searchType": "Elastic",
            "nodeResourceIds": [
              "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Compute/virtualMachines/elastic-vm-01-fymfur",
              "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Compute/virtualMachines/elastic-vm-02-fymfur",
              "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Compute/virtualMachines/elastic-vm-03-fymfur"
            ]
          },
          "cacheProfile": {
            "name": "moodle-cache",
            "skuName": "Basic",
            "family": "C",
            "capacity": 0,
            "cacheResourceId": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39/providers/Microsoft.Cache/redis/redis-fymfur"
          },
          "backupProfile": {
            "backupEnabled": "Disabled",
            "vaultResourceId": ""
          }
        }
      }
    },
    "201": {
      "body": {
        "id": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/test-rg/providers/Microsot.Workloads/phpWorkloads/moodle39",
        "name": "moodle39",
        "type": "Microsot.Workloads/phpWorkloads",
        "tags": {},
        "location": "westcentalus",
        "kind": "Moodle",
        "sku": {
          "name": "Large"
        },
        "systemData": {
          "createdBy": "php_user@xyz.com",
          "createdByType": "User",
          "createdAt": "2021-08-19T15:10:46.196Z",
          "lastModifiedBy": "php_user@xyz.com",
          "lastModifiedByType": "User",
          "lastModifiedAt": "2021-08-19T15:10:46.196Z"
        },
        "properties": {
          "infraResourceGroup": "/subscriptions/6d875e77-e412-4d7d-9af4-8895278b4443/resourceGroups/php-mrg-moodle39",
          "provisioningState": "Created",
          "adminUserProfile": {
            "userName": "moodleadmin",
            "sshPublicKey": "===SSH=PUBLIC=KEY==="
          },
          "webNodesProfile": {
            "name": "web-server",
            "nodeSku": "Standard_DS2_v2",
            "osImage": {
              "publisher": "UbuntuServer",
              "offer": "Canonical",
              "sku": "18.0-LTS",
              "version": "latest"
            },
            "osDisk": {
              "storageType": "Premium_LRS"
            },
            "autoScaleMinCount": 1,
            "autoScaleMaxCount": 1
          },
          "controllerProfile": {
            "name": "contoller-vm",
            "nodeSku": "Standard_DS2_v2",
            "osImage": {
              "publisher": "UbuntuServer",
              "offer": "Canonical",
              "sku": "18.0-LTS",
              "version": "latest"
            },
            "osDisk": {
              "storageType": "Premium_LRS"
            },
            "dataDisks": [
              {
                "storageType": "Premium_LRS",
                "sizeInGB": 100
              }
            ]
          },
          "networkProfile": {
            "loadBalancerType": "ApplicationGateway",
            "loadBalancerSku": "Standard_v2",
            "loadBalancerTier": "Standard_v2",
            "capacity": 3,
            "azureFrontDoorEnabled": "Enabled"
          },
          "databaseProfile": {
            "type": "MySql",
            "serverName": "moodle-db-server",
            "version": "5.7",
            "adminUser": "dbadmin",
            "sku": "Standard_D32s_v4",
            "tier": "GeneralPurpose",
            "haEnabled": "Disabled",
            "storageSku": "Premium_LRS",
            "storageInGB": 128,
            "storageIops": 200,
            "backupRetentionDays": 7,
            "sslEnforcementEnabled": "Enabled"
          },
          "siteProfile": {
            "webServerType": "nginx",
            "domainName": "www.example.com",
            "siteUrl": "https://www.example.com"
          },
          "fileshareProfile": {
            "shareType": "AzureFiles",
            "storageType": "Premium_LRS",
            "shareSizeInGB": 100
          },
          "applicationProfile": {
            "version": "Moodle_39",
            "databaseName": "moodledb",
            "databaseUser": "moodleuser"
          },
          "phpProfile": {
            "version": "7.3"
          },
          "searchProfile": {
            "nodeSku": "Standard_DS2_v2",
            "osImage": {
              "publisher": "UbuntuServer",
              "offer": "Canonical",
              "sku": "18.0-LTS",
              "version": "latest"
            },
            "osDisk": {
              "storageType": "Premium_LRS"
            },
            "searchType": "Elastic"
          },
          "cacheProfile": {
            "name": "moodle-cache",
            "skuName": "Basic",
            "family": "C",
            "capacity": 0
          },
          "backupProfile": {
            "backupEnabled": "Disabled"
          }
        }
      }
    }
  }
}
