{
  "parameters": {
    "api-version": "2022-08-16-preview",
    "subscriptionId": "00000000-0000-0000-0000-000000000000",
    "resourceGroupName": "resourceGroup1",
    "instanceName": "WorkloadInstances1",
    "workloadInstanceRequestParameter": {
      "location": "westus",
      "tags": {
        "key": "value"
      },
      "properties": {
        "workloadType": "WorkloadType1",
        "workloadProvider": "WorkloadProvider1",
        "resourcesDiscoveryDataFeeds": [
          {
            "name": "resourcesDiscoveryDataFeed1",
            "dataFeedType": "AzureLogAnalyticsDataFeed",
            "dataFeedClass": "Raw",
            "details": {
              "query": "kustoBasedQuery1"
            },
            "dataStore": {
              "workspaceId": "workspaceId1",
              "dataStoreCredentials": {
                "dataStoreCredentialType": "ServicePrincipalCredential",
                "clientId": "<clientId>",
                "clientSecret": "<clientSecret>"
              }
            },
            "trigger": {
              "triggerType": "ScheduleTrigger",
              "granularity": "seconds",
              "value": 60,
              "startFrom": "2021-08-19T15:10:46.196Z"
            },
            "schema": {
              "datasets": [
                {
                  "name": "dataset11",
                  "impactCategory": "impactCategory1",
                  "datasetType": "StaticDataset",
                  "resourceIdColumns": [
                    {
                      "name": "resourceIdColumnName11",
                      "alias": "columnAlias",
                      "columnType": "string"
                    }
                  ],
                  "dimensionColumns": [
                    {
                      "name": "dimensionColumnName11",
                      "alias": "columnAlias",
                      "columnType": "string"
                    },
                    {
                      "name": "dimensionColumnName12",
                      "alias": "columnAlias",
                      "columnType": "string"
                    }
                  ],
                  "timestampColumn": {
                    "name": "timestampColumnName1",
                    "alias": "columnAlias",
                    "columnType": "timestamp"
                  }
                }
              ]
            }
          }
        ],
        "telemetryDataFeeds": [
          {
            "name": "telemetryDataFeed1",
            "dataFeedType": "AzureLogAnalyticsDataFeed",
            "dataFeedClass": "Raw",
            "details": {
              "query": "kustoBasedQuery2"
            },
            "dataStore": {
              "workspaceId": "workspaceId2",
              "dataStoreCredentials": {
                "dataStoreCredentialType": "ServicePrincipalCredential",
                "clientId": "<clientId>",
                "clientSecret": "<clientSecret>"
              }
            },
            "trigger": {
              "triggerType": "ScheduleTrigger",
              "granularity": "seconds",
              "value": 60,
              "startFrom": "2021-08-19T15:10:46.196Z"
            },
            "schema": {
              "datasets": [
                {
                  "name": "dataset21",
                  "impactCategory": "impactCategory2",
                  "datasetType": "StaticDataset",
                  "resourceIdColumns": [
                    {
                      "name": "resourceIdColumnName21",
                      "alias": "columnAlias",
                      "columnType": "string"
                    },
                    {
                      "name": "resourceIdColumnName22",
                      "alias": "columnAlias",
                      "columnType": "string"
                    }
                  ],
                  "dimensionColumns": [
                    {
                      "name": "dimensionColumnName21",
                      "alias": "columnAlias",
                      "columnType": "string"
                    },
                    {
                      "name": "dimensionColumnName22",
                      "alias": "columnAlias",
                      "columnType": "string"
                    }
                  ],
                  "timestampColumn": {
                    "name": "timestampColumnName2",
                    "alias": "columnAlias",
                    "columnType": "date"
                  }
                }
              ]
            }
          }
        ],
        "outputDataStores": [
          {
            "dataStoreType": "AzureLogAnalyticsOutputDataStore",
            "workspaceId": "workspaceId",
            "dataStoreCredentials": {
              "dataStoreCredentialType": "AccessKeyCredential",
              "sharedKey": "<sharedKey>"
            }
          }
        ]
      },
      "responses": {
        "200": {
          "body": {
            "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/resourceGroup1/providers/Microsoft.WorkloadsInsights/instances/WorkloadInstances1",
            "name": "WorkloadInstances1",
            "type": "Microsoft.WorkloadsInsights/instances",
            "location": "westus",
            "tags": {
              "key": "value"
            },
            "systemData": {
              "createdBy": "user@xyz.com",
              "createdByType": "User",
              "createdAt": "2021-08-19T15:10:46.196Z",
              "lastModifiedBy": "user@xyz.com",
              "lastModifiedByType": "User",
              "lastModifiedAt": "2021-08-19T15:10:46.196Z"
            },
            "properties": {
              "provisioningState": "Succeeded",
              "workloadType": "WorkloadType1",
              "workloadProvider": "WorkloadProvider1",
              "resourcesDiscoveryDataFeeds": [
                {
                  "details": {
                    "query": "kustoBasedQuery1"
                  },
                  "dataStore": {
                    "workspaceId": "workspaceId1",
                    "dataStoreType": "AzureLogAnalyticsInputDataStore",
                    "dataStoreCredentials": {
                      "clientId": "<clientId>",
                      "clientSecret": "<clientSecret>",
                      "dataStoreCredentialType": "ServicePrincipalCredential"
                    }
                  },
                  "name": "resourcesDiscoveryDataFeed1",
                  "dataFeedType": "AzureLogAnalyticsDataFeed",
                  "dataFeedClass": "Raw",
                  "trigger": {
                    "granularity": "seconds",
                    "value": 60,
                    "startFrom": "2021-08-19T15:10:46.196Z",
                    "triggerType": "ScheduleTrigger"
                  },
                  "schema": {
                    "datasets": [
                      {
                        "name": "dataset11",
                        "impactCategory": "impactCategory1",
                        "datasetType": "StaticDataset",
                        "resourceIdColumns": [
                          {
                            "name": "resourceIdColumnName11",
                            "alias": "columnAlias",
                            "columnType": "string"
                          }
                        ],
                        "dimensionColumns": [
                          {
                            "name": "dimensionColumnName11",
                            "alias": "columnAlias",
                            "columnType": "string"
                          },
                          {
                            "name": "dimensionColumnName12",
                            "alias": "columnAlias",
                            "columnType": "string"
                          }
                        ],
                        "timestampColumn": {
                          "name": "timestampColumnName1",
                          "alias": "columnAlias",
                          "columnType": "timestamp"
                        }
                      }
                    ]
                  }
                }
              ],
              "telemetryDataFeeds": [
                {
                  "details": {
                    "query": "kustoBasedQuery2"
                  },
                  "dataStore": {
                    "workspaceId": "workspaceId2",
                    "dataStoreType": "AzureLogAnalyticsInputDataStore",
                    "dataStoreCredentials": {
                      "clientId": "<clientId>",
                      "clientSecret": "<clientSecret>",
                      "dataStoreCredentialType": "ServicePrincipalCredential"
                    }
                  },
                  "name": "telemetryDataFeed1",
                  "dataFeedType": "AzureLogAnalyticsDataFeed",
                  "dataFeedClass": "Raw",
                  "trigger": {
                    "granularity": "seconds",
                    "value": 60,
                    "startFrom": "2021-08-19T15:10:46.196Z",
                    "triggerType": "ScheduleTrigger"
                  },
                  "schema": {
                    "datasets": [
                      {
                        "name": "dataset21",
                        "impactCategory": "impactCategory2",
                        "datasetType": "StaticDataset",
                        "resourceIdColumns": [
                          {
                            "name": "resourceIdColumnName21",
                            "alias": "columnAlias",
                            "columnType": "string"
                          },
                          {
                            "name": "resourceIdColumnName22",
                            "alias": "columnAlias",
                            "columnType": "string"
                          }
                        ],
                        "dimensionColumns": [
                          {
                            "name": "dimensionColumnName21",
                            "alias": "columnAlias",
                            "columnType": "string"
                          },
                          {
                            "name": "dimensionColumnName22",
                            "alias": "columnAlias",
                            "columnType": "string"
                          }
                        ],
                        "timestampColumn": {
                          "name": "timestampColumnName2",
                          "alias": "columnAlias",
                          "columnType": "date"
                        }
                      }
                    ]
                  }
                }
              ],
              "outputDataStores": [
                {
                  "dataStoreType": "AzureLogAnalyticsOutputDataStore",
                  "workspaceId": "workspaceId",
                  "dataStoreCredentials": {
                    "sharedKey": "<sharedKey>",
                    "dataStoreCredentialType": "AccessKeyCredential"
                  }
                }
              ]
            }
          }
        }
      }
    },
    "201": {
      "body": {
        "id": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/resourceGroup1/providers/Microsoft.WorkloadsInsights/instances/WorkloadInstances1",
        "name": "WorkloadInstances1",
        "type": "Microsoft.WorkloadsInsights/instances",
        "location": "westus",
        "tags": {
          "key": "value"
        },
        "properties": {
          "provisioningState": "Succeeded",
          "workloadType": "WorkloadType1",
          "workloadProvider": "WorkloadProvider1",
          "resourcesDiscoveryDataFeeds": [
            {
              "details": {
                "query": "kustoBasedQuery1"
              },
              "dataStore": {
                "workspaceId": "workspaceId1",
                "dataStoreType": "AzureLogAnalyticsInputDataStore",
                "dataStoreCredentials": {
                  "clientId": "<clientId>",
                  "clientSecret": "<clientSecret>",
                  "dataStoreCredentialType": "ServicePrincipalCredential"
                }
              },
              "name": "resourcesDiscoveryDataFeed1",
              "dataFeedType": "AzureLogAnalyticsDataFeed",
              "dataFeedClass": "Raw",
              "trigger": {
                "granularity": "seconds",
                "value": 60,
                "startFrom": "2021-08-19T15:10:46.196Z",
                "triggerType": "ScheduleTrigger"
              },
              "schema": {
                "datasets": [
                  {
                    "name": "dataset11",
                    "impactCategory": "impactCategory1",
                    "datasetType": "StaticDataset",
                    "resourceIdColumns": [
                      {
                        "name": "resourceIdColumnName11",
                        "alias": "columnAlias",
                        "columnType": "string"
                      }
                    ],
                    "dimensionColumns": [
                      {
                        "name": "dimensionColumnName11",
                        "alias": "columnAlias",
                        "columnType": "string"
                      },
                      {
                        "name": "dimensionColumnName12",
                        "alias": "columnAlias",
                        "columnType": "string"
                      }
                    ],
                    "timestampColumn": {
                      "name": "timestampColumnName1",
                      "alias": "columnAlias",
                      "columnType": "timestamp"
                    }
                  }
                ]
              }
            }
          ],
          "telemetryDataFeeds": [
            {
              "details": {
                "query": "kustoBasedQuery2"
              },
              "dataStore": {
                "workspaceId": "workspaceId2",
                "dataStoreType": "AzureLogAnalyticsInputDataStore",
                "dataStoreCredentials": {
                  "clientId": "<clientId>",
                  "clientSecret": "<clientSecret>",
                  "dataStoreCredentialType": "ServicePrincipalCredential"
                }
              },
              "name": "telemetryDataFeed1",
              "dataFeedType": "AzureLogAnalyticsDataFeed",
              "dataFeedClass": "Raw",
              "trigger": {
                "granularity": "seconds",
                "value": 60,
                "startFrom": "2021-08-19T15:10:46.196Z",
                "triggerType": "ScheduleTrigger"
              },
              "schema": {
                "datasets": [
                  {
                    "name": "dataset21",
                    "impactCategory": "impactCategory2",
                    "datasetType": "StaticDataset",
                    "resourceIdColumns": [
                      {
                        "name": "resourceIdColumnName21",
                        "alias": "columnAlias",
                        "columnType": "string"
                      },
                      {
                        "name": "resourceIdColumnName22",
                        "alias": "columnAlias",
                        "columnType": "string"
                      }
                    ],
                    "dimensionColumns": [
                      {
                        "name": "dimensionColumnName21",
                        "alias": "columnAlias",
                        "columnType": "string"
                      },
                      {
                        "name": "dimensionColumnName22",
                        "alias": "columnAlias",
                        "columnType": "string"
                      }
                    ],
                    "timestampColumn": {
                      "name": "timestampColumnName2",
                      "alias": "columnAlias",
                      "columnType": "date"
                    }
                  }
                ]
              }
            }
          ],
          "outputDataStores": [
            {
              "workspaceId": "workspaceId",
              "dataStoreType": "AzureLogAnalyticsOutputDataStore",
              "dataStoreCredentials": {
                "sharedKey": "<sharedKey>",
                "dataStoreCredentialType": "AccessKeyCredential"
              }
            }
          ]
        }
      }
    }
  }
}